{# src/Aueio/ClubBundle/Resources/views/Team/view.html.twig #}
{% extends 'AueioClubBundle::layout.html.twig' %}

{% block title %}
	{{ 'team.title.view'|trans({}, 'AueioClubBundle') }}
{% endblock %}

{% block header_menu %}
	{% include 'AueioClubBundle::tab.menu.html.twig' with {'selected': "team"} %}
{% endblock %}

{% block sidebar %}
	<li class="selected"><a href="{{ path('aueio_club_player_view', {"id": team.id}) }}">{{ 'sidebar.view'|trans({}, 'AueioClubBundle') }}</a>
{% if is_granted("ROLE_ADMIN") %}
	<li><a href="{{ path('aueio_club_team_edit', {"id": team.id}) }}">{{ 'sidebar.edit'|trans({}, 'AueioClubBundle') }}</a>
	<li><a href="{{ path('aueio_club_team_delete', {"id": team.id}) }}" onclick="return confirm('{{ 'sidebar.confirm'|trans({}, 'AueioClubBundle') }}')">{{ 'sidebar.delete'|trans({}, 'AueioClubBundle') }}</a></li>
	<li><a href="{{ path('aueio_club_team_new') }}">{{ 'sidebar.new'|trans({}, 'AueioClubBundle') }}</a></li>
{% endif %}
{% endblock %}

{% block content %}
<div id="team">
	<div class="full">
		<h2>{{ team.name }}</h2>
		<div id="team-desc">
			<div class="cols">
				<h3>{{ 'team.view.title.adress'|trans({}, 'AueioClubBundle') }}</h3>
				<p>{{ team.adress}}</p>
			</div><div class="cols">
				<h3>{{ 'team.view.title.contact'|trans({}, 'AueioClubBundle') }}</h3>
				<ul>
			    {% for player in team.contacts %}
					<li class="player">{% include 'AueioClubBundle:Player:link.html.twig' with {'player': player} %}</li>
			    {% else %}
			        <h4>{{ 'team.notfound'|trans({}, 'AueioClubBundle') }}</h4>
			    {% endfor %}
				</ul>
			</div>
		</div>
		<div class="stats">
			<h3>{{ 'team.view.stats.title'|trans({}, 'AueioClubBundle') }}</h3>
			<ul>
	{% if stats['total'] > 0 %}
				<li>
					<ul class="stats-results">
						<li class="games-win {% if stats['win'] >= (stats['total']-stats['win']) %}green{% endif %}">{{ 'team.view.stats.win'|trans({'%nb%':stats['win'], '%percent%':(stats['win']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
						<li class="games-lost {% if stats['lost'] >= (stats['total']-stats['lost']) %}red{% endif %}">{{ 'team.view.stats.lost'|trans({'%nb%':stats['lost'], '%percent%':(stats['lost']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
						<li class="games-nul {% if stats['nul'] >= (stats['total']-stats['nul']) %}blue{% endif %}">{{ 'team.view.stats.nul'|trans({'%nb%':stats['nul'], '%percent%':(stats['nul']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
					</ul>
				</li>
				<li>
					<ul class="stats-games">
						<li class="games-local">{{ 'team.view.stats.local'|trans({'%nb%':stats['local'], '%percent%':(stats['local']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
						<li class="games-visitor">{{ 'team.view.stats.visitor'|trans({'%nb%':stats['visitor'], '%percent%':(stats['visitor']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
						<li class="games-giveup">{{ 'team.view.stats.giveup'|trans({'%nb%':stats['giveup'], '%percent%':(stats['giveup']*100)//stats['total'] }, 'AueioClubBundle') }}</li>
					</ul>
				</li>
	{% endif %}
				<li class="games-total ">{{ 'team.view.stats.total'|trans({'%nb%':stats['total']}, 'AueioClubBundle') }}</li>
			</ul>
	
		</div>
		<div id="team-games" class="cols">
			<h3>{{ 'team.view.title.game'|trans({}, 'AueioClubBundle') }}</h3>
			<ul>
		    {% for role in team.roles %}
				<li class="role">{% include 'AueioClubBundle:Role:team.html.twig' with {'role': role, 'id': team.id} %}</li>
		    {% else %}
		        <h3>{{ 'game.notfound'|trans({}, 'AueioClubBundle') }}</h3>
		    {% endfor %}
			</ul>
		</div><div id="team-players" class="cols">
			<h3>{{ 'team.view.title.player'|trans({}, 'AueioClubBundle') }}</h3>
			<ul>
			{% for player in team.players %}
				<li class="player">
				{% include 'AueioClubBundle:Player:short.html.twig' with {'player': player} %}
				</li>
			{% else %}
		        <h3>{{ 'player.notfound'|trans({}, 'AueioClubBundle') }}</h3>
		    {% endfor %}
		    </ul>
		</div>
	</div>
</div>
{% endblock %}