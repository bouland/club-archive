{# src/Aueio/ClubBundle/Resources/views/Game/view.html.twig #}
{% extends 'AueioClubBundle::layout.html.twig' %}

{% block title %}
	{{ 'game.title.selection'|trans({}, 'AueioClubBundle') }}
{% endblock %}

{% block header_menu %}
	{% include 'AueioClubBundle::tab.menu.html.twig' with {'selected': "game"} %}
{% endblock %}

{% block sidebar %}
	<li><a href="{{ path('aueio_club_game_view', {"id": game.id}) }}">{{ 'sidebar.view'|trans({}, 'AueioClubBundle') }}</a>
	<li class="selected"><a href="{{ path('aueio_club_game_selection', {"id": game.id}) }}">{{ 'sidebar.selection'|trans({}, 'AueioClubBundle') }}</a>
	<li><a href="{{ path('aueio_club_game_score', {"id": game.id}) }}">{{ 'sidebar.score'|trans({}, 'AueioClubBundle') }}</a>
	<li><a href="{{ path('aueio_club_game_sheet', {"id": game.id}) }}">{{ 'sidebar.sheet'|trans({}, 'AueioClubBundle') }}</a>
{% if is_granted("ROLE_ADMIN") %}
	<li><a href="{{ path('aueio_club_game_edit', {"id": game.id}) }}">{{ 'sidebar.edit'|trans({}, 'AueioClubBundle') }}</a>
	<li><a href="{{ path('aueio_club_game_delete', {"id": game.id}) }}">{{ 'sidebar.delete'|trans({}, 'AueioClubBundle') }}</a></li>
	<li><a href="{{ path('aueio_club_game_new') }}">{{ 'sidebar.new'|trans({}, 'AueioClubBundle') }}</a></li>
{% endif %}
{% endblock %}

{% block content %}
<div id="game">
	<div class="full">
		{% include 'AueioClubBundle:Game:header.html.twig' %}
	</div>
	<div id="game-manage">
		<ul class="game-selection-cols">
			<li>
				<h4>{{ 'game.selection.wait'|trans({'%count%': players['wait']|length}, 'AueioClubBundle') }}</h4>
				<ul>
			    {% for player in players['wait'] %}
					<li>
						{% include 'AueioClubBundle:Player:link.html.twig' with {'player': player} %}
						<ul class="game-selection-menu">
							<li>
								<a href="{{ path('aueio_club_action_add', {"id_game": game.id, "id_player": player.id, "type": "play"}) }}" title="Selectionner">
									<img src="/bundles/aueioclub/images/Crystal_Clear_action_apply.png" alt="valid logo">
								</a>
							</li>
							<li>
								<a href="{{ path('aueio_club_action_add', {"id_game": game.id, "id_player": player.id, "type": "miss"}) }}" title="Absent">
									<img src="/bundles/aueioclub/images/Crystal_Clear_action_button_cancel.png" alt="cancel logo">
								</a>
							</li>
						</ul>
					</li>
			    {% else %}
			        <h4>{{ 'player.notfound'|trans({}, 'AueioClubBundle') }}</h4>
			    {% endfor %}
				</ul>
			</li><li>
				<h4>{{ 'game.selection.miss'|trans({'%count%': players['miss']|length}, 'AueioClubBundle')}}</h4>
				<ul>
			    {% for player in players['miss'] %}
					<li>
						{% include 'AueioClubBundle:Player:link.html.twig' with {'player': player} %}
						<ul class="game-selection-menu">
							<li>
								<a href="{{ path('aueio_club_action_delete', {"id_game": game.id, "id_player": player.id, "type": "miss"}) }}" title="Modifier">
									<img src="/bundles/aueioclub/images/Crystal_Clear_action_button_cancel.png" alt="cancel logo">
								</a>
							</li>
						</ul>
					</li>
			    {% else %}
			        <h4>{{ 'player.notfound'|trans({}, 'AueioClubBundle') }}</h4>
			    {% endfor %}
				</ul>
			</li><li>
				<h4>{{ 'game.selection.shop'|trans({}, 'AueioClubBundle') }}</h4>
				<ul>
			    {% for player in players['shop'] %}
					<li>
						{% include 'AueioClubBundle:Player:link.html.twig' with {'player': player} %}
						<ul class="game-selection-menu">
							<li>
								<a href="{{ path('aueio_club_action_delete', {"id_game": game.id, "id_player": player.id, "type": "shop"}) }}" title="Modifier">
									<img src="/bundles/aueioclub/images/Crystal_Clear_action_button_cancel.png" alt="cancel logo">
								</a>
							</li>
						</ul>
					</li>
			    {% else %}
			        <h4>{{ 'game.selection.noshop'|trans({}, 'AueioClubBundle') }}</h4>
			    {% endfor %}
			    </ul>
			</li><li>
				<h4>{{ 'game.selection.play'|trans({'%count%': players['play']|length}, 'AueioClubBundle') }}</h4>
				<ul>
			    {% for player in players['play'] %}
					<li>
						{% include 'AueioClubBundle:Player:link.html.twig' with {'player': player} %}
						<ul class="game-selection-menu">
							<li>
								<a href="{{ path('aueio_club_action_add', {"id_game": game.id, "id_player": player.id, "type": "shop"}) }}" title="Courses">
									<img style="height: 20px;margin-top: -2px;" src="/bundles/aueioclub/images/logo-panier.png" alt="cancel logo">
								</a>
							</li>
							<li>
								<a href="{{ path('aueio_club_action_delete', {"id_game": game.id, "id_player": player.id, "type": "play"}) }}" title="Modifier">
									<img src="/bundles/aueioclub/images/Crystal_Clear_action_button_cancel.png" alt="cancel logo">
								</a>
							</li>
						</ul>
					</li>
			    {% else %}
			        <h4>{{ 'player.notfound'|trans({}, 'AueioClubBundle') }}</h4>
			    {% endfor %}
				</ul>
			</li>
		</ul>
	</div>
	<div id="game-selection">
		<h4>{{ 'game.selection.details'|trans({}, 'AueioClubBundle') }}</h4>
		<ul>
		{% for player in players['play'] %}
			<li class="player">
			{% include 'AueioClubBundle:Player:short.html.twig' with {'player': player} %}
			</li>
		{% else %}
	        <h4>{{ 'player.notfound'|trans({}, 'AueioClubBundle') }}</h4>
	    {% endfor %}
	    </ul>
	</div>

</div>
{% endblock %}
